version: "2.0"

intents:
- greet
- goodbye
- affirm
- deny
- mood_great
- mood_unhappy
- bot_challenge
- order_status
- order_cancel
- return
- inform
- order_food
- food_menu

entities:
- email
- food
- number
- negation

slots:
  food:
    type: text
    influence_conversation: false
  email: 
    type: text
    influence_conversation: false
  qty:
    type: text
    influence_conversation: false
  rating:
    type: text
    influence_conversation: false
    auto_fill: false
  open_feedback:
    type: text
    influence_conversation: false
  requested_slot:
    type: any
    influence_conversation: false
  verified_email:
    type: bool
    influence_conversation: true
  survey_complete:
    type: bool
    influence_conversation: true

responses:
  utter_greet:
  - text: "Hey! How are you?"

  utter_cheer_up:
  - text: "Here is something to cheer you up:"
    image: "https://i.imgur.com/nGF1K8f.jpg"

  utter_did_that_help:
  - text: "Did that help you?"

  utter_happy:
  - text: "Great, carry on!"

  utter_goodbye:
  - text: "Bye"

  utter_iamabot:
  - text: "I am a bot."

  utter_default:
  - text: I don't think I understand. Can you try providing more detail?
  - text: um, what did you just say to me?
  - text: beep, boop, don't understand

  utter_ask_order_status_form_email:
  - text: I can help you find the status of your order. What's your email address
      so I can find the order?

  utter_order_status:
  - text: Looks like the order from {email} is currently in {status}

  utter_no_order:
  - text: Hmm, seems like we don't have an order associated with that email

  utter_ask_cancel_form_email:
  - text: Sorry to hear you want to cancel! To help find your order, can you please
      provide your email address?

  utter_order_cancelled:
  - text: Your order has been cancelled. 

  utter_ask_return_form_email:
  - text: Sorry to hear you are not satisfied with our food. To help find your order, can you please provide
      your email address?

  utter_order_returned:
  - text: Ok, I've kicked off your return. Our staff will be there to collect your food.

  utter_food_menu_start:
  - text: I can help you find food you are looking for.

  utter_ask_food_menu_form_food:
  - text: What food are you looking for?

  utter_food_menu_finish:
  - text: Looks like we have {food} in today's menu.
  
  utter_confirm_email:
  - text: I already have your email on file. Would you like me to look up your order
      under {email}?

  utter_ask_survey_form_rating:
  - buttons:
    - payload: '1'
      title: '1'
    - payload: '2'
      title: '2'
    - payload: '3'
      title: '3'
    - payload: '4'
      title: '4'
    - payload: '5'
      title: '5'
    text: On a scale of 1-5, how would you rate your conversation today?

  utter_ask_survey_form_open_feedback:
  - text: Is there any other feedback you can provide?

  utter_survey_end:
  - text: Thank you for the feedback!
  
  utter_start_over:
  - text: Ok, let's start over.
  
  utter_open_feedback: #this is to test the response was collected
  - text: Here's your lovely feedback - {open_feedback}
  
  utter_in_menu:
  - text: You're in luck! We have those for delivery.
  
  utter_no_menu:
  - text: Sorry, seems like we are out of those.
  
  utter_order_food:
  - text: Sorry, I can't actually help you order food. Please visit our 
      site to order foood! I can help you check the menu, see the 
      status of an order or even make a change to that order.

actions:
- action_menu_search
- action_survey_submit
- action_order_status
- action_cancel_order
- action_return

forms:
  order_status_form:
    required_slots:
      email:
      - entity: email
        type: from_entity
      - intent:
        - inform
        type: from_text
  cancel_form:
    required_slots:
      email:
      - entity: email
        type: from_entity
  return_form:
    required_slots:
      email:
      - entity: email
        not_intent: product_updates
        type: from_entity
  survey_form:
    required_slots:
      rating:
      - entity: number
        type: from_entity
      open_feedback:
      - type: from_text
  food_menu_form:
    required_slots:
      food:
      - entity: food
        type: from_entity


session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
